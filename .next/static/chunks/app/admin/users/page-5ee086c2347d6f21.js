(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{25509:(e,s,t)=>{Promise.resolve().then(t.bind(t,50457))},50457:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>V});var a=t(95155),r=t(14661),l=t(54596),n=t(12115),i=t(4642);let c=t(23464).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"},withCredentials:!0}),o=async(e,s)=>await c.get(e,{params:s}),d=async(e,s)=>await c.post(e,s),m=async(e,s)=>await c.put(e,s),u=async e=>await c.delete(e);var x=t(13568),h=t(23176);let p=()=>({save:()=>async(e,s)=>{e((0,i.vL)()),e((0,i.Bm)());try{let t={...s().form.UserForm},a=new Promise(async(e,s)=>{let a=await d("/admin/user",t);return(null==a?void 0:a.status)!==201?s(Error("Error While Create User")):e(a.data)});await x.Ay.promise(a,{loading:"Proccess",success:"Create User Success",error:e=>e.message||"Failed To Create User"},{success:{duration:3e3},error:{duration:4e3}}),e((0,h.E2)("all")),e((0,i.Oo)()),e(j())}catch(e){console.error(e)}finally{e((0,i.Z9)()),e((0,i.lF)())}},edit:()=>async(e,s)=>{e((0,i.vL)()),e((0,i.Bm)());try{let t=s().form.UserForm,a={...t},r=new Promise(async(e,s)=>{let r=await m("/admin/user/".concat(t._id),a);return(null==r?void 0:r.status)!==200?s(Error("Error Whille Edit User")):e(r.data)});await x.Ay.promise(r,{loading:"Proccess",success:"Edit User Success",error:e=>e.message||"Failed To Edit User"},{success:{duration:3e3},error:{duration:4e3}}),e((0,h.E2)("all")),e((0,i.Oo)()),e(j())}catch(e){console.error(e)}finally{e((0,i.Z9)()),e((0,i.lF)())}},deleteData:e=>async s=>{s((0,i.gP)());try{let t=new Promise(async(s,t)=>{try{let a=await u("/admin/user/".concat(e));if((null==a?void 0:a.status)!==200)return t(Error("Error While Delete User"));return s(a.data)}catch(e){if(e instanceof Error)return t(e.message);return t(Error("Unknown error occurred while deleting user"))}});await x.Ay.promise(t,{loading:"Proccess",success:"Delete User Success",error:e=>e.message||"Failed To Delete User"},{success:{duration:3e3},error:{duration:4e3}}),s(j())}catch(e){console.log(e),s((0,i.tC)()),s((0,i.Z9)()),s((0,i.lF)())}finally{s((0,i.Z9)()),s((0,i.lF)())}}}),j=()=>async e=>{try{e((0,i.XA)()),e((0,l.gV)({data:[]}));let s=(await o("/admin/user")).data;e((0,l.gV)({data:s}))}catch(s){console.log(s),e((0,l.gV)({data:[]}))}finally{e((0,i.xv)())}};var g=t(54213),y=t(89917),b=t(62525),f=t(84616),v=t(81304),N=t(62332),w=t(42355),k=t(13052);let E=e=>{let{columns:s,data:t,handleEdit:l,handleDelete:c,anotherAction:o,icon:d,editTujuan:m,editTembusan:u,editEvent:x,emptyText:h="Data Kosong",anotherActionLabel:p,deleteDisable:j,editDisable:E,cetakDokumentasi:A,cetakNotulensi:C,editScript:F,pagination:U,itemsPerPage:_}=e,[S,T]=(0,n.useState)(1),P=(0,n.useRef)({}),Y=(0,n.useRef)({}),D=(0,r.G)(i.pH).loading.table,[B,O]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=e=>{if(null!==B){let s=P.current[B],t=Y.current[B];t&&!t.contains(e.target)&&s&&!s.contains(e.target)&&O(null)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[B]);let[R,q]=(0,n.useState)({key:null,direction:null}),L=[...t];R.key&&R.direction&&L.sort((e,s)=>{let t=e[R.key],a=s[R.key];return t<a?"asc"===R.direction?-1:1:t>a?"asc"===R.direction?1:-1:0});let W=e=>{q(s=>{if(s.key===e){if("asc"===s.direction)return{key:e,direction:"desc"};if("desc"===s.direction)return{key:null,direction:null}}return{key:e,direction:"asc"}})},G=_||10,M=L.slice((S-1)*G,S*G),z=Math.ceil(L.length/G),H=e=>{e>=1&&e<=z&&(T(e),O(null))};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("table",{className:"w-full divide-y divide-gray-200 text-sm text-center",children:[(0,a.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,a.jsxs)("tr",{children:[s.map((e,s)=>(0,a.jsx)("th",{className:"px-6 py-3 font-bold text-gray-700 cursor-pointer select-none",onClick:()=>e.key&&W(e.key),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,a.jsx)("span",{children:e.title}),R.key===e.key&&(0,a.jsxs)(a.Fragment,{children:["asc"===R.direction&&(0,a.jsx)("span",{children:"â–²"}),"desc"===R.direction&&(0,a.jsx)("span",{children:"â–¼"})]})]})},s)),(l||o||c||m||x||u||C||A||F)&&(0,a.jsx)("th",{className:"px-6 py-3 font-bold text-gray-700",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:s.length+1,children:(0,a.jsx)("div",{className:"flex flex-col justify-center items-center h-[50vh] w-full",children:(0,a.jsxs)("svg",{className:"animate-spin h-20 w-20 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]})})})}):L.length?M.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[s.map((s,r)=>(0,a.jsx)("td",{className:"px-6 py-4",children:s.render?s.render(e,t):s.key?String(e[s.key]):null},r)),(l||o||c||m||x||u||C||A)&&(0,a.jsxs)("td",{className:"px-6 py-4 relative",children:[(0,a.jsx)("button",{ref:e=>{P.current[t]=e},onClick:()=>O(B===t?null:t),className:"px-3 py-1 border border-gray-400 rounded-md text-sm font-medium hover:bg-gray-100",children:"..."}),B===t&&(0,a.jsxs)("div",{ref:e=>{Y.current[t]=e},className:"absolute z-10 right-0 mt-2 w-52 bg-white border border-gray-200 rounded-lg shadow-lg p-3 space-y-3",children:[(0,a.jsx)("p",{className:"text-center font-semibold text-gray-700 border-b pb-1",children:"Actions"}),l&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{disabled:!!E&&E(e),className:"w-full py-2 flex items-center justify-center space-x-2 text-yellow-600 hover:bg-yellow-100 rounded",onClick:()=>l(e),children:[(0,a.jsx)(y.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Edit"})]})}),c&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{disabled:!!j&&j(e),className:"w-full py-2 flex items-center justify-center space-x-2 text-red-600 hover:bg-red-100 rounded",onClick:()=>c(e),children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Hapus"})]})}),o&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{className:"w-full py-2 flex items-center justify-center space-x-2 text-blue-600 hover:bg-blue-100 rounded",onClick:()=>o(e),children:[d,(0,a.jsx)("span",{children:p})]})}),m&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{className:"w-full py-2 flex items-center justify-center space-x-2 text-blue-600 hover:bg-blue-100 rounded",onClick:()=>m(e),children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Ubah/Tambah Tujuan"})]})}),u&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{className:"w-full py-2 flex items-center justify-center space-x-2 text-blue-600 hover:bg-blue-100 rounded",onClick:()=>u(e),children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Ubah/Tambah Tembusan"})]})}),x&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{className:"w-full py-2 flex items-center justify-center space-x-2 text-blue-600 hover:bg-blue-100 rounded",onClick:()=>x(e),children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Ubah/Tambah Kegiatan"})]})}),C&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{className:"w-full py-2 flex items-center justify-center space-x-2 text-green-600 hover:bg-green-100 rounded",onClick:()=>C(e),children:[(0,a.jsx)(v.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Cetak Notulensi"})]})}),A&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{className:"w-full py-2 flex items-center justify-center space-x-2 text-green-600 hover:bg-green-100 rounded",onClick:()=>A(e),children:[(0,a.jsx)(v.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Cetak Dokumentasi"})]})}),F&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{className:"w-full py-2 flex items-center justify-center space-x-2 text-green-600 hover:bg-green-100 rounded",onClick:()=>F(e),children:[(0,a.jsx)(N.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Edit Script"})]})})]})]})]},t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:s.length+1,children:(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-[50vh] w-full text-gray-500",children:[(0,a.jsx)(g.A,{size:80}),(0,a.jsx)("p",{className:"text-xl font-medium mt-4",children:h})]})})})}),U&&z>1&&(0,a.jsx)("tfoot",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:s.length+1,className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-2 text-sm",children:[(0,a.jsx)("button",{className:"px-3 py-1 border rounded-3xl hover:bg-gray-100",disabled:1===S,onClick:()=>H(S-1),children:(0,a.jsx)(w.A,{})}),Array.from({length:z},(e,s)=>(0,a.jsx)("button",{onClick:()=>H(s+1),className:"px-3 py-1 border rounded-4xl hover:bg-gray-100 ".concat(S===s+1?"bg-gray-300 font-bold":""),children:s+1},s)),(0,a.jsx)("button",{className:"px-3 py-1 border rounded-3xl hover:bg-gray-100",disabled:S===z,onClick:()=>H(S+1),children:(0,a.jsx)(k.A,{})})]})})})})]})})},A=[{title:"No",render:(e,s)=>(0,a.jsxs)("div",{className:"text-center",children:[s+1,"."]})},{title:"Name",render:e=>(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{children:[e.first_name," ",e.last_name]})})},{title:"Username",key:"username"},{title:"Role",key:"role"}];var C=t(24752),F=t.n(C);let U=()=>{let e=(0,r.j)(),s=(0,r.G)(l.mB).data,t=p();return(0,n.useEffect)(()=>{e(j())},[e]),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(E,{data:s,columns:A,itemsPerPage:5,pagination:!0,handleEdit:s=>e((0,i.mi)({modal:{formName:"UserForm",isEdit:!0,data:s,isOpen:!0}})),handleDelete:s=>(function(e){let s=F().mixin({customClass:{confirmButton:"m-2 p-1 w-20 items-center flex justify-center text-white bg-brand-700 hover:bg-brand-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm dark:bg-brand-600 dark:hover:bg-brand-700 focus:outline-none dark:focus:ring-brand-800",cancelButton:"m-2 p-1 w-20 items-center flex justify-center text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm dark:bg-red-600 dark:hover:bg-red-700 focus:outline-none dark:focus:ring-red-800"},buttonsStyling:!1});return s.fire({title:"Yakin Mau Hapus Data Ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Iya",cancelButtonText:"Tidak",reverseButtons:!0}).then(t=>{t.isConfirmed?e():t.dismiss===F().DismissReason.cancel&&s.fire({title:"Gagal",text:"Data Tidak Jadi Di Hapus",icon:"info"})})})(()=>e(t.deleteData(s._id))),deleteDisable:e=>"rivan-nugraha"===e.username})})};var _=t(52021),S=t(4772),T=t(91331),P=t(54416);let Y=e=>{let{children:s,title:t,namaForm:l,width:c="600px"}=e,o=(0,r.G)(i.pH),d=(0,r.j)(),m=()=>{l?d((0,h.E2)(l)):d((0,h.E2)("all")),d((0,i.Oo)())};return(0,a.jsx)(S.e,{appear:!0,show:o.modal.isOpen,as:n.Fragment,children:(0,a.jsxs)(T.lG,{as:"div",className:"relative z-2000",onClose:m,children:[(0,a.jsx)(S.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-50",leave:"ease-in duration-200",leaveFrom:"opacity-50",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black opacity-50"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex items-center justify-center p-4 text-center",children:(0,a.jsx)(S.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(T.lG.Panel,{className:"w-full transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",style:{maxWidth:c},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)(T.lG.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:[o.modal.isEdit?"Edit":"Add"," ",t]}),(0,a.jsx)("button",{onClick:m,className:"text-gray-500 hover:text-gray-700 transition",children:(0,a.jsx)(P.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"mt-2 text-gray-700",children:s})]})})})})]})})};var D=t(50134),B=t(37129);let O=B.Ik().shape({_id:B.Yj().optional(),first_name:B.Yj().required("please provide First Name"),last_name:B.Yj().required("please provide Last Name"),username:B.Yj().required("please provide Username"),password:B.Yj().required("please provide Password"),role:B.Yj().required("please select role"),email:B.Yj().optional()}),R=B.Ik().shape({_id:B.Yj().optional(),first_name:B.Yj().required("please provide First Name"),last_name:B.Yj().required("please provide Last Name"),username:B.Yj().required("please provide Username"),password:B.Yj().optional(),role:B.Yj().required("please select role"),email:B.Yj().optional()});var q=t(94227),L=t(39153),W=t(66474),G=t(5196),M=t(52596),z=t(21739);let H=e=>{let{name:s,label:t,control:r,options:l,placeholder:i,readOnly:c,onChange:o,className:d}=e;return(0,a.jsx)(z.zB,{control:r,name:s,render:e=>{let{field:s}=e,r=l.find(e=>e.value===s.value)||null;return(0,a.jsxs)(z.eI,{className:d,children:[(0,a.jsx)(z.lR,{children:t}),(0,a.jsx)(z.MJ,{renderInput:()=>(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(L.WF,{value:r,onChange:e=>{c||(o&&o(e),s.onChange(null==e?void 0:e.value))},disabled:c,children:(0,a.jsxs)("div",{className:"relative z-500000",children:[(0,a.jsxs)(L.WF.Button,{className:(0,M.A)("w-full rounded-md border px-3 py-2 text-left shadow-sm sm:text-sm",c?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white text-black"),children:[(null==r?void 0:r.label)?(0,a.jsx)("span",{className:"block truncate",children:r.label}):(0,a.jsx)("span",{className:"block truncate text-gray-400",children:(null==r?void 0:r.label)||i||"Select"}),(0,a.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:(0,a.jsx)(W.A,{className:"w-4 h-4 text-gray-400"})})]}),(0,a.jsx)(S.e,{as:n.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(L.WF.Options,{className:"fixed z-[999999] mt-1 max-h-60 w-[90%] md:w-[550px] overflow-auto rounded-md bg-white py-1 text-sm shadow-lg ring-1 ring-black ring-opacity-5",children:l.map((e,s)=>(0,a.jsx)(L.WF.Option,{className:e=>{let{active:s}=e;return(0,M.A)("relative cursor-pointer select-none py-2 pl-10 pr-4",s?"bg-indigo-100 text-indigo-900":"text-gray-900")},value:e,children:s=>{let{selected:t}=s;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:(0,M.A)("block truncate",t?"font-semibold":"font-normal"),children:e.label}),t&&(0,a.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-indigo-600",children:(0,a.jsx)(G.A,{className:"w-4 h-4"})})]})}},s))})})]})})})})]})}})};function I(){let e=(0,r.j)(),s=(0,r.G)(i.pH).modal,t=p();(0,n.useEffect)(()=>{if(s.isEdit){let t=s.data;e((0,h.KY)({form:"UserForm",values:{_id:t._id,first_name:t.first_name,last_name:t.last_name,username:t.username,email:t.email,role:t.role}}))}},[e,s.data,s.isEdit]);let l=[{label:"MASTER",value:"MASTER"},{label:"QA",value:"QA"},{label:"DEVSECOPS",value:"DEVSECOPS"}];return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(D.A,{formName:"UserForm",onSubmit:()=>{s.isEdit?e(t.edit()):e(t.save())},validation:s.isEdit?R:O,children:e=>{let{form:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{control:t.control,name:"_id",label:"_id",type:"hidden"}),(0,a.jsx)(q.A,{control:t.control,name:"first_name",label:"First Name",placeholder:"First Name",className:"mb-4"}),(0,a.jsx)(q.A,{control:t.control,name:"last_name",label:"Last Name",placeholder:"Last Name",className:"mb-4"}),(0,a.jsx)(q.A,{control:t.control,name:"username",label:"Username",placeholder:"Username",className:"mb-4",readOnly:s.isEdit}),(0,a.jsx)(q.A,{control:t.control,name:"password",label:"Password",placeholder:"Password",type:"password",className:"mb-4"}),(0,a.jsx)(H,{control:t.control,name:"role",label:"Role",placeholder:"Role",options:l,className:"mb-4"}),(0,a.jsx)(q.A,{control:t.control,name:"email",label:"E-Mail",placeholder:"E-Mail",className:"mb-4"}),(0,a.jsx)(_.A,{text:s.isEdit?"Edit Now":"Save Now"})]})}})})}function V(){let e=(0,r.j)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"mb-3 text-3xl",children:"Users"}),(0,a.jsx)(U,{}),(0,a.jsx)(_.A,{text:"Add New User",onClick:()=>e((0,i.mi)({modal:{formName:"FormUser",isEdit:!1,isOpen:!0,data:[]}}))}),(0,a.jsx)(Y,{title:"User",namaForm:"UserForm",children:(0,a.jsx)(I,{})})]})}},54596:(e,s,t)=>{"use strict";t.d(s,{mB:()=>l,gV:()=>r,oN:()=>a});let a=(0,t(5710).Z0)({name:"user",initialState:{data:[]},reducers:{setUser:(e,s)=>{e.data=s.payload.data}}}),{setUser:r}=a.actions,l=e=>e.user}},e=>{var s=s=>e(e.s=s);e.O(0,[579,545,772,320,555,568,535,22,985,616,441,684,358],()=>s(25509)),_N_E=e.O()}]);