(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{3143:(e,s,t)=>{"use strict";t.d(s,{tY:()=>c,b3:()=>n,rk:()=>l});var r=t(5710),a=t(58334);let c=(0,r.Z0)({name:"metric",initialState:{current:{timestamp:0,agent_id:"",hostname:"",cpu:{total_percent:0,per_core:[],cores:0},memory:{total_bytes:0,available_bytes:0,used_bytes:0,used_percent:0},process_usage:[],cpu_proc:{total_usage:0,cores:[],pressure:{some:0,full:0}},memory_proc:{total_bytes:0,free_bytes:0,available_bytes:0,used_bytes:0,used_percent:0,buffers_bytes:0,cached_bytes:0,swap_total_bytes:0,swap_free_bytes:0,pressure:{some_avg10:0,some_avg60:0,full_avg10:0,full_avg60:0}},disk_proc:{disks:[]},network_proc:{interfaces:[]}},cpu:[],memory:[],net:[]},reducers:{setMetric:(e,s)=>{let t=s.payload,r=(0,a.Oe)(t.timestamp);e.current=t,e.cpu.push({t:r,v:t.cpu.total_percent}),e.cpu.length>11&&e.cpu.shift(),e.memory.push({t:r,v:t.memory.used_percent}),e.memory.length>11&&e.memory.shift();let c=t.network_proc.interfaces.reduce((e,s)=>e+s.rx_bytes_ps,0),l=t.network_proc.interfaces.reduce((e,s)=>e+s.tx_bytes_ps,0);e.net.push({t:r,rx:c,tx:l}),e.net.length>11&&e.net.shift()}}}),{setMetric:l}=c.actions,n=e=>e.metric},14661:(e,s,t)=>{"use strict";t.d(s,{G:()=>c,j:()=>a});var r=t(34540);let a=()=>(0,r.wA)(),c=r.d4},16886:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var r=t(95155),a=t(48488),c=t.n(a);let l=e=>{let{value:s}=e;return(0,r.jsx)(c(),{style:{width:"auto",height:"auto"},type:"semicircle",arc:{width:.2,padding:5e-4,cornerRadius:1,subArcs:[{limit:40,color:"#5BE12C"},{limit:80,color:"#F5CD19",showTick:!0},{color:"#EA4228"}]},pointer:{color:"#000000",length:.8,width:15},labels:{valueLabel:{style:{fontSize:"14px",fontWeight:"bold",color:"#000000"}}},value:s})};var n=t(14661),o=t(3143),d=t(12115),i=t(49509),x=t(42628),h=t(93504),m=t(96025),p=t(16238),u=t(24021),b=t(26089);let y=()=>{let e=(0,n.G)(o.b3).cpu;return(0,r.jsx)(x.u,{children:(0,r.jsxs)(h.b,{data:e,children:[(0,r.jsx)(m.W,{dataKey:"t"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(u.m,{}),(0,r.jsx)(b.N1,{dataKey:"v"})]})})},j=()=>{let e=(0,n.G)(o.b3).net;return(0,r.jsx)(x.u,{children:(0,r.jsxs)(h.b,{data:e,children:[(0,r.jsx)(m.W,{dataKey:"t"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(b.N1,{dataKey:"rx"}),(0,r.jsx)(b.N1,{dataKey:"tx"})]})})};var g=t(58334),_=t(3401),N=t(94754),f=t(85895);let v=()=>{let e=(0,n.G)(o.b3).current.disk_proc.disks.map(e=>({device:e.device,util_percent:e.util_percent}));return(0,r.jsx)(x.u,{width:"100%",height:300,children:(0,r.jsxs)(_.E,{data:e,children:[(0,r.jsx)(N.d,{strokeDasharray:"3 3"}),(0,r.jsx)(m.W,{dataKey:"device"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(u.m,{}),(0,r.jsx)(f.yP,{dataKey:"util_percent",fill:"#8884d8"})]})})},w=e=>(e/1048576).toFixed(2),k=()=>{let e=(0,n.G)(o.b3).current.process_usage;return(0,r.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,r.jsx)("thead",{className:"bg-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 border",children:"PID"}),(0,r.jsx)("th",{className:"px-4 py-2 border",children:"Name"}),(0,r.jsx)("th",{className:"px-4 py-2 border",children:"User"}),(0,r.jsx)("th",{className:"px-4 py-2 border",children:"Memory (MB)"}),(0,r.jsx)("th",{className:"px-4 py-2 border",children:"CPU (%)"}),(0,r.jsx)("th",{className:"px-4 py-2 border",children:"Memory (%)"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-4 py-2 border",children:e.pid}),(0,r.jsx)("td",{className:"px-4 py-2 border",children:e.name}),(0,r.jsx)("td",{className:"px-4 py-2 border",children:e.user}),(0,r.jsx)("td",{className:"px-4 py-2 border",children:w(e.rss_bytes)}),(0,r.jsx)("td",{className:"px-4 py-2 border",children:e.cpu_percent.toFixed(2)}),(0,r.jsx)("td",{className:"px-4 py-2 border",children:e.mem_percent.toFixed(2)})]},e.pid))})]})};function S(){let e=(0,n.j)(),s=(0,d.useRef)(null);(0,d.useEffect)(()=>{let t=i.env.NEXT_PUBLIC_WEBSOCKET_URL;if(!t)return void console.error("WebSocket URL is not defined");let r=()=>{s.current=new WebSocket(t),s.current.onopen=()=>console.log("Connected to WebSocket"),s.current.onmessage=s=>{try{e((0,o.rk)(JSON.parse(s.data)))}catch(e){console.log("Invalid JSON",e)}},s.current.onclose=()=>{setTimeout(r,5e3)}};return r(),()=>{var e;null==(e=s.current)||e.close()}},[e]);let t=(0,n.G)(o.b3);return""===t.current.hostname?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[50vh]",children:[(0,r.jsx)("h1",{className:"text-3xl font-semibold mb-4",children:"Monitor"}),(0,r.jsxs)("svg",{className:"animate-spin h-20 w-20 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]})]}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,r.jsxs)("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Monitor"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-2 sm:mt-0",children:[(0,r.jsxs)("div",{children:["Hostname: ",t.current.hostname]}),(0,r.jsxs)("div",{children:["Updated: ",(0,g.Yk)(t.current.timestamp)]})]})]}),(0,r.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-200 py-8 text-center shadow-sm bg-gray",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"CPU Percentage"}),(0,r.jsx)(l,{value:t.current.cpu.total_percent})]}),(0,r.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-200 py-8 text-center shadow-sm bg-gray",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Memory Percentage"}),(0,r.jsx)(l,{value:t.current.memory.used_percent})]}),(0,r.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-200 py-8 text-center shadow-sm bg-gray",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Swap Disk Usage"}),(0,r.jsx)(v,{})]})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold",children:"CPU History"}),(0,r.jsx)("div",{className:"h-[250px] bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:(0,r.jsx)(y,{})})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold",children:"Network History"}),(0,r.jsx)("div",{className:"h-[250px] bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:(0,r.jsx)(j,{})})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold",children:"Process Usage"}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:(0,r.jsx)(k,{})})]})]})}},58334:(e,s,t)=>{"use strict";function r(e){let s=new Date(1e3*e),t=e=>e.toString().padStart(2,"0"),r=t(s.getHours()),a=t(s.getMinutes()),c=t(s.getSeconds());return"".concat(r,":").concat(a,":").concat(c)}function a(e){let s=new Date(1e3*e),t=e=>e.toString().padStart(2,"0"),r=t(s.getDate()),a=t(s.getMonth()+1),c=s.getFullYear().toString(),l=t(s.getHours()),n=t(s.getMinutes()),o=t(s.getSeconds());return"".concat(r,"/").concat(a,"/").concat(c," ").concat(l,":").concat(n,":").concat(o)}t.d(s,{Oe:()=>r,Yk:()=>a})},91890:(e,s,t)=>{Promise.resolve().then(t.bind(t,16886))}},e=>{var s=s=>e(e.s=s);e.O(0,[935,555,22,939,441,684,358],()=>s(91890)),_N_E=e.O()}]);