"use strict";(()=>{var e={};e.id=487,e.ids=[487],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5486:e=>{e.exports=require("bcrypt")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34081:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>x,routeModule:()=>m,serverHooks:()=>g,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>y});var n={};t.r(n),t.d(n,{GET:()=>c,POST:()=>d});var s=t(96559),a=t(48088),o=t(37719),i=t(8748),u=t(7806),p=t(66252),l=t(32190);async function c(e){try{let{searchParams:r}=new URL(e.url),t={username:r.get("username")||void 0,email:r.get("email")||void 0,role:r.get("role")||void 0},n=function(e){let r={};return e.username&&(r.username={$regex:e.username,$options:"i"}),e.email&&(r.email={$regex:e.email,$options:"i"}),e.role&&(r.role=e.role),r}(t),s=(await i.A.userRepository.findBy(n)).map(e=>p.R.toPlainObject(e));return l.NextResponse.json(s.sort((e,r)=>e.first_name.localeCompare(r.first_name)))}catch(e){return console.error("Error on GET:",e),l.NextResponse.json({message:e||"Internal Server Error"},{status:500})}}async function d(e){try{let r=await e.json(),t=await u.v.create({username:r.username,first_name:r.first_name,last_name:r.last_name,email:r.email,role:r.role,password:r.password,input_by:r.input_by||"SYSTEM",create_at:new Date}),n=await i.A.userRepository.create(t);return l.NextResponse.json({message:"User created successfully",data:n._id},{status:201})}catch(e){return console.error("Error on POST:",e),l.NextResponse.json({message:e||"Internal Server Error"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/admin/user/route",pathname:"/api/admin/user",filename:"route",bundlePath:"app/api/admin/user/route"},resolvedPagePath:"/Users/nagatech/Documents/my_project/next/server-dashboard/src/app/api/admin/user/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:f,workUnitAsyncStorage:y,serverHooks:g}=m;function x(){return(0,o.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:y})}},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},56037:e=>{e.exports=require("mongoose")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72609:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{describeHasCheckingStringProperty:function(){return s},describeStringPropertyAccess:function(){return n},wellKnownProperties:function(){return a}});let t=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function n(e,r){return t.test(r)?"`"+e+"."+r+"`":"`"+e+"["+JSON.stringify(r)+"]`"}function s(e,r){let t=JSON.stringify(r);return"`Reflect.has("+e+", "+t+")`, `"+t+" in "+e+"`, or similar"}let a=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","toJSON","$$typeof","__esModule"])}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[243,580,184],()=>t(34081));module.exports=n})();